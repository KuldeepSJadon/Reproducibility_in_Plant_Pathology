---
title: "README"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Creating a sample of articles

Twenty one journals in the discipline of plant pathology were selected by the four authors as being the primary choice for most plant pathologists when publishing manuscripts.

Using the assumption that journals publish an average 10 articles per issue, for a population of ~1000 articles, using a confidence level of 95% and confidence interval of 10% we need 88 samples. In [Issue #3](https://github.com/adamhsparks/Reproducible-Research-in-Plant-Pathology/issues/3), we decided to select 200 articles to have a large sample of the population.

## R setup
Set up the R environment

```{r library, message=FALSE}
library(dplyr)
library(readr)

set.seed(1)

# For printing tibble in total
options(tibble.print_max = 21, tibble.print_min = 21)
```
## Create list of journals

```{r journal_list}
journal_list <- tibble(
  seq(1:21),
  c("Australasian Plant Pathology",
    "Canadian Journal of Plant Pathology",
    "Crop Protection",
    "European Journal of Plant Pathology",
    "Forest Pathology",
    "Journal of General Plant Pathology",
    "Journal of Phytopathology",
    "Journal of Plant Pathology",
    "Virology Journal (Plant Viruses Section)",
    "Molecular Plant-Microbe Interactions",
    "Molecular Plant Pathology",
    "Nematology",
    "Physiological and Molecular Plant Pathology",
    "Phytoparasitica",
    "Phytopathologia Mediterranea",
    "Phytopathology",
    "Plant Disease",
    "Plant Health Progress",
    "Plant Pathology",
    "Revista Mexicana de FitopatologÃ­a",
    "Tropical Plant Pathology"))

names(journal_list) <- c("number", "publication")
```

## Create list of assignees
From the four authors of this paper, create a list for us to use that will randomly assign articles for us to evaluate for this manuscript.

```{r assignee}
assignee <- rep(c("Adam", "Emerson", "Zach", "Nik"), 50)

```

## Create random lists

### Create a randomised list of the journals

```{r journal_sample}
journals <- tibble(sample(1:21, 200, replace = TRUE))
names(journals) <- "number"
journals <- left_join(journals, journal_list, "number")
```

### Randomly select articles
Generate a random list of years between 2012 and 2016 and a random list of start pages between 1 and 150 since some journals start numbering at 1 with every issue. Then bind the columns of the randomised list of journals with the randomised years and page start numbers. This then assumes that there is no temporal effect, _i.e._, the time of year an article is published does not affect whether or not it is reproducible.


```{r years_and_articles}

year <- sample(2012:2016, 200, replace = TRUE)

start_page <- sample.int(150, 200, replace = TRUE)

journals <- cbind(journals[, -1], year, start_page, assignee)

arrange(journals, publication, year, start_page)

```

## Check the number of articles per journal

```{r, count}
journals %>%  
  group_by(publication) %>% 
  tally(sort = TRUE) 
```

# Joining articles with assignees
The articles were searched for and DOIs were saved in a CSV file with notes related to the articles and selections. Using this CSV file retrieve the BibTex citations for those available and write a "Assigned_Articles.bib" file to disk as well as the updated "Assigned_Articles.csv".

```{r join_files, warning=FALSE}
notes <- read.csv("Assigned_article_notes.csv", strip.white = TRUE)

bib <- RefManageR::GetBibEntryWithDOI(notes$doi)

# Join articles and references for saving to CSV for reference
Assigned_Articles <- dplyr::left_join(as.data.frame(bib), notes, by = "doi")

write.csv(Assigned_Articles, "Assigned_Articles.csv")

RefManageR::WriteBib(bib, "Assigned_Articles.bib")

```

Note that not all of the articles have DOIs and some of the DOIs don't appear to work, so we'll manually add them here.

```{r add_missing_articles}

```

## R Session Info
```{r, session_info}
sessionInfo()
```
